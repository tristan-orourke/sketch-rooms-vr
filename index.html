<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sketch Rooms</title>
    <meta
      name="description"
      content="A recreation of Amery Mikolic-O'Rourke's Sketch Rooms VR art installation"
    />
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script>

    <script src="js/play-on-click.js"></script>
    <script src="js/hide-on-play.js"></script>
    <script src="js/regular-polygon-side.js"></script>
    <script src="js/teleport-on-click.js"></script>
  </head>

  <body>
    <a-scene background="color: black">
      <a-assets>
        <img id="bathroom-1" src="/assets/bathroom/1.png" />
        <img id="bathroom-2" src="/assets/bathroom/2.png" />
        <img id="bathroom-3" src="/assets/bathroom/3.png" />
        <img id="bathroom-4" src="/assets/bathroom/4.png" />
        <img id="bathroom-5" src="/assets/bathroom/5.png" />
        <img id="bathroom-6" src="/assets/bathroom/6.png" />

        <img id="bedroom-1" src="/assets/bedroom/1.png" />
        <img id="bedroom-2" src="/assets/bedroom/2.png" />
        <img id="bedroom-3" src="/assets/bedroom/3.png" />
        <img id="bedroom-4" src="/assets/bedroom/4.png" />
        <img id="bedroom-5" src="/assets/bedroom/5.png" />
        <img id="bedroom-6" src="/assets/bedroom/6.png" />
        <img id="bedroom-7" src="/assets/bedroom/7.png" />
        <img id="bedroom-8" src="/assets/bedroom/8.png" />

        <img id="hallway-1" src="/assets/hallway/1.png" />
        <img id="hallway-2" src="/assets/hallway/2.png" />
        <img id="hallway-3" src="/assets/hallway/3.png" />
        <img id="hallway-4" src="/assets/hallway/4.png" />
        <img id="hallway-5" src="/assets/hallway/5.png" />
        <img id="hallway-6" src="/assets/hallway/6.png" />

        <img id="kitchen-1" src="/assets/kitchen/1.png" />
        <img id="kitchen-2" src="/assets/kitchen/2.png" />
        <img id="kitchen-3" src="/assets/kitchen/3.png" />
        <img id="kitchen-4" src="/assets/kitchen/4.png" />
        <img id="kitchen-5" src="/assets/kitchen/5.png" />
        <img id="kitchen-6" src="/assets/kitchen/6.png" />
        <img id="kitchen-7" src="/assets/kitchen/7.png" />

        <img id="living-room-1" src="/assets/living-room/1.png" />
        <img id="living-room-2" src="/assets/living-room/2.png" />
        <img id="living-room-3" src="/assets/living-room/3.png" />
        <img id="living-room-4" src="/assets/living-room/4.png" />
        <img id="living-room-5" src="/assets/living-room/5.png" />
        <img id="living-room-6" src="/assets/living-room/6.png" />
        <img id="living-room-7" src="/assets/living-room/7.png" />
        <img id="living-room-8" src="/assets/living-room/8.png" />
        <img id="living-room-9" src="/assets/living-room/9.png" />
        <img id="living-room-10" src="/assets/living-room/10.png" />

        <img id="tays-room-1" src="/assets/tays-room/1.png" />
        <img id="tays-room-2" src="/assets/tays-room/2.png" />
        <img id="tays-room-3" src="/assets/tays-room/3.png" />
        <img id="tays-room-4" src="/assets/tays-room/4.png" />
        <img id="tays-room-5" src="/assets/tays-room/5.png" />
        <img id="tays-room-6" src="/assets/tays-room/6.png" />
        <img id="tays-room-7" src="/assets/tays-room/7.png" />
        <img id="tays-room-8" src="/assets/tays-room/8.png" />

        <a-mixin id="panel" geometry="height: 11; width: 8.5"></a-mixin>

        <a-mixin
          id="teleportable"
          animation__appear="property: material.opacity; from: 0; to: 1; dur: 500; startEvents: appear"
          animation__disappear="property: material.opacity; from: 1; to: 0; dur: 500; delay: 500; startEvents: disappear"
        >
        </a-mixin>

        <a-mixin
          id="curtain"
          animation__appear="property: material.opacity; from: 0; to: 1; dur: 450; startEvents: teleport"
          animation__disappear="property: material.opacity; from: 1; to: 0; dur: 450; delay: 550; startEvents: teleport"
        >
        </a-mixin>

        <!-- For a cursor which shrinks to nothing when not looking at a clickable object. (Not sure why color animation not working.) -->
        <a-mixin
          id="vanishing-cursor"
          scale="0 0 0"
          geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
          material="color: black; shader: flat"
          animation__mouseenter="property: scale; easing: easeOutQuad; startEvents: mouseenter; to: 1 1 1; dur: 1000"
          animation__mouseleave="property: scale; easing: easeOutQuad; startEvents: mouseleave; to: 0 0 0; dur: 1000"
          animation__clickstart="property: material.color; type: color; startEvents: click; to: green; dur: 100"
          animation__clickend="property: material.color; type: color; startEvents: click; to: black; dur: 100; delay: 100"
        >
        </a-mixin>
        <!-- For a cursor which changes color when looking at a clickable object -->
        <a-mixin
          id="color-cursor"
          event-set__mouseenter="material.color: green;"
          event-set__mouseleave="material.color: black;"
          animation__clickstart="property: scale; startEvents: click; easing: easeOutQuad; to: 1.1 1.1 1.1; dur: 100"
          animation__clickend="property: scale; startEvents: click; easing: easeInQuad; from: 1.1 1.1 1.1; to: 1 1 1; dur: 100; delay: 100"
        >
        </a-mixin>
      </a-assets>

      <!-- Floor and Ceiling -->
      <!-- <a-plane color="#FFFFFF" rotation="-90 0 0" height="100" width="100"></a-plane> -->
      <!-- <a-plane color="#FFFFFF" position="0 3 0" rotation="90 0 0" height="100" width="100"></a-plane> -->

      <a-entity id="bathroom" position="0 2 0" visible="false" rotation="0 1 0">
        <a-image
          id="bathroom-panel-1"
          src="#bathroom-1"
          regular-polygon-side="width: 8.5; sides: 6; index: 0"
          mixin="panel"
          teleport-on-click="from: #bathroom; to: #hallway"
          class="clickable"
        ></a-image>
        <a-image
          id="bathroom-panel-2"
          src="#bathroom-2"
          regular-polygon-side="width: 8.5; sides: 6; index: 1"
          mixin="panel"
        ></a-image>
        <a-image
          id="bathroom-panel-3"
          src="#bathroom-3"
          regular-polygon-side="width: 8.5; sides: 6; index: 2"
          mixin="panel"
        ></a-image>
        <a-image
          id="bathroom-panel-4"
          src="#bathroom-4"
          regular-polygon-side="width: 8.5; sides: 6; index: 3"
          mixin="panel"
        ></a-image>
        <a-image
          id="bathroom-panel-5"
          src="#bathroom-5"
          regular-polygon-side="width: 8.5; sides: 6; index: 4"
          mixin="panel"
        ></a-image>
        <a-image
          id="bathroom-panel-6"
          src="#bathroom-6"
          regular-polygon-side="width: 8.5; sides: 6; index: 5"
          mixin="panel"
        ></a-image>
      </a-entity>

      <!-- Bedroom -->
      <a-entity id="bedroom" position="0 2 0" visible="false" rotation="0 1 0">
        <!-- 8 bedroom panels -->
        <a-image
          id="bedroom-panel-1"
          src="#bedroom-1"
          regular-polygon-side="width: 8.5; sides: 8; index: 0"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="bedroom-panel-2"
          src="#bedroom-2"
          regular-polygon-side="width: 8.5; sides: 8; index: 1"
          teleport-on-click="from: #bedroom; to: #living-room"
          class="clickable"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="bedroom-panel-3"
          src="#bedroom-3"
          regular-polygon-side="width: 8.5; sides: 8; index: 2"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="bedroom-panel-4"
          src="#bedroom-4"
          regular-polygon-side="width: 8.5; sides: 8; index: 3"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="bedroom-panel-5"
          src="#bedroom-5"
          regular-polygon-side="width: 8.5; sides: 8; index: 4"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="bedroom-panel-6"
          src="#bedroom-6"
          regular-polygon-side="width: 8.5; sides: 8; index: 5"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="bedroom-panel-7"
          src="#bedroom-7"
          regular-polygon-side="width: 8.5; sides: 8; index: 6"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="bedroom-panel-8"
          src="#bedroom-8"
          regular-polygon-side="width: 8.5; sides: 8; index: 7"
          mixin="panel"
        >
        </a-image>
      </a-entity>

      <a-entity id="hallway" position="0 2 0" visible="true">
        <!-- 6 hallway panels -->
        <a-image
          id="hallway-panel-1"
          src="#hallway-1"
          regular-polygon-side="width: 8.5; sides: 6; index: 0"
          mixin="panel"
          teleport-on-click="from: #hallway; to: #bathroom"
          class="clickable active"
        ></a-image>
        <a-image
          id="hallway-panel-2"
          src="#hallway-2"
          regular-polygon-side="width: 8.5; sides: 6; index: 1"
          mixin="panel"
          teleport-on-click="from: #hallway; to: #kitchen"
          class="clickable active"
        ></a-image>
        <a-image
          class="clickable active"
          id="hallway-panel-3"
          src="#hallway-3"
          regular-polygon-side="width: 8.5; sides: 6; index: 2"
          mixin="panel"
          teleport-on-click="from: #hallway; to: #kitchen"
          class="clickable active"
        ></a-image>
        <a-image
          id="hallway-panel-4"
          src="#hallway-4"
          regular-polygon-side="width: 8.5; sides: 6; index: 3"
          mixin="panel"
          teleport-on-click="from: #hallway; to: #living-room"
          class="clickable active"
        ></a-image>
        <a-image
          id="hallway-panel-5"
          src="#hallway-5"
          regular-polygon-side="width: 8.5; sides: 6; index: 4"
          mixin="panel"
        ></a-image>
        <a-image
          id="hallway-panel-6"
          src="#hallway-6"
          regular-polygon-side="width: 8.5; sides: 6; index: 5"
          mixin="panel"
          teleport-on-click="from: #hallway; to: #tays-room"
          class="clickable active"
        ></a-image>
      </a-entity>

      <a-entity id="kitchen" position="0 2 0" visible="false" rotation="0 1 0">
        <!-- 7 kitchen panels -->
        <a-image
          id="kitchen-panel-1"
          src="#kitchen-1"
          regular-polygon-side="width: 8.5; sides: 7; index: 0"
          mixin="panel"
        ></a-image>
        <a-image
          id="kitchen-panel-2"
          src="#kitchen-2"
          regular-polygon-side="width: 8.5; sides: 7; index: 1"
          mixin="panel"
        ></a-image>
        <a-image
          id="kitchen-panel-3"
          src="#kitchen-3"
          regular-polygon-side="width: 8.5; sides: 7; index: 2"
          mixin="panel"
          teleport-on-click="from: #kitchen; to: #hallway"
          class="clickable"
        ></a-image>
        <a-image
          id="kitchen-panel-4"
          src="#kitchen-4"
          regular-polygon-side="width: 8.5; sides: 7; index: 3"
          mixin="panel"
          teleport-on-click="from: #kitchen; to: #hallway"
          class="clickable"
        ></a-image>
        <a-image
          id="kitchen-panel-5"
          src="#kitchen-5"
          regular-polygon-side="width: 8.5; sides: 7; index: 4"
          mixin="panel"
        ></a-image>
        <a-image
          id="kitchen-panel-6"
          src="#kitchen-6"
          regular-polygon-side="width: 8.5; sides: 7; index: 5"
          mixin="panel"
        ></a-image>
        <a-image
          id="kitchen-panel-7"
          src="#kitchen-7"
          regular-polygon-side="width: 8.5; sides: 7; index: 6"
          mixin="panel"
        ></a-image>
      </a-entity>

      <!-- Living Room -->
      <a-entity
        id="living-room"
        position="0 2 0"
        visible="false"
        rotation="0 1 0"
      >
        <!-- 10 living room panels -->
        <a-image
          id="living-room-panel-1"
          src="#living-room-1"
          regular-polygon-side="width: 8.5; sides: 10; index: 0"
          teleport-on-click="from: #living-room; to: #hallway"
          class="clickable"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="living-room-panel-2"
          src="#living-room-2"
          regular-polygon-side="width: 8.5; sides: 10; index: 1"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="living-room-panel-3"
          src="#living-room-3"
          regular-polygon-side="width: 8.5; sides: 10; index: 2"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="living-room-panel-4"
          src="#living-room-4"
          regular-polygon-side="width: 8.5; sides: 10; index: 3"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="living-room-panel-5"
          src="#living-room-5"
          regular-polygon-side="width: 8.5; sides: 10; index: 4"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="living-room-panel-6"
          src="#living-room-6"
          regular-polygon-side="width: 8.5; sides: 10; index: 5"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="living-room-panel-7"
          src="#living-room-7"
          regular-polygon-side="width: 8.5; sides: 10; index: 6"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="living-room-panel-8"
          src="#living-room-8"
          regular-polygon-side="width: 8.5; sides: 10; index: 7"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="living-room-panel-9"
          src="#living-room-9"
          regular-polygon-side="width: 8.5; sides: 10; index: 8"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="living-room-panel-10"
          src="#living-room-10"
          regular-polygon-side="width: 8.5; sides: 10; index: 9"
          mixin="panel"
          teleport-on-click="from: #living-room; to: #bedroom"
          class="clickable"
        >
        </a-image>
      </a-entity>

      <!-- Tays room -->
      <a-entity
        id="tays-room"
        position="0 2 0"
        visible="false"
        rotation="0 1 0"
      >
        <!-- 8 tays room panels -->
        <a-image
          id="tays-room-panel-1"
          src="#tays-room-1"
          regular-polygon-side="width: 8.5; sides: 8; index: 0"
          mixin="panel"
          teleport-on-click="from: #tays-room; to: #hallway"
          class="clickable"
        >
        </a-image>
        <a-image
          id="tays-room-panel-2"
          src="#tays-room-2"
          regular-polygon-side="width: 8.5; sides: 8; index: 1"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="tays-room-panel-3"
          src="#tays-room-3"
          regular-polygon-side="width: 8.5; sides: 8; index: 2"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="tays-room-panel-4"
          src="#tays-room-4"
          regular-polygon-side="width: 8.5; sides: 8; index: 3"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="tays-room-panel-5"
          src="#tays-room-5"
          regular-polygon-side="width: 8.5; sides: 8; index: 4"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="tays-room-panel-6"
          src="#tays-room-6"
          regular-polygon-side="width: 8.5; sides: 8; index: 5"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="tays-room-panel-7"
          src="#tays-room-7"
          regular-polygon-side="width: 8.5; sides: 8; index: 6"
          mixin="panel"
        >
        </a-image>
        <a-image
          id="tays-room-panel-8"
          src="#tays-room-8"
          regular-polygon-side="width: 8.5; sides: 8; index: 7"
          mixin="panel"
        >
        </a-image>
      </a-entity>

      <a-entity camera look-controls>
        <a-sphere
          id="curtain"
          material="color: black; side: back; opacity: 0"
          radius="1.1"
          animation__teleport-out="property: material.opacity; from: 0; to: 1; dur: 450; startEvents: teleport"
          animation__teleport-in="property: material.opacity; from: 1; to: 0; dur: 450; delay: 550; startEvents: teleport"
        >
          <a-entity
            id="cursor"
            cursor
            raycaster="objects: .clickable.active"
            position="0 0 -1"
            geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
            material="color: black; shader: flat"
            mixin="color-cursor"
          >
          </a-entity>
        </a-sphere>
      </a-entity>
    </a-scene>
  </body>
</html>
